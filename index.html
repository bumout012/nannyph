<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NannyProvider.PH — Application Form</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="styles.css?v=6">
  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2Y3XFZ1LN7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-2Y3XFZ1LN7');
  </script>
  <!-- GTM -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-T3H6DRN4');</script>
</head>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T3H6DRN4"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <header class="site-header">
    <div class="wrap header-row">
      <a class="brand" href="welcome.html" aria-label="Home">
        <img class="logo-img" src="https://static.wixstatic.com/media/d3b624_54ab1e86dc4e4c4db1890ecba2241006~mv2.png/v1/crop/x_147%2Cy_147%2Cw_786%2Ch_786/fill/w_94%2Ch_94%2Cal_c%2Cq_85%2Cusm_0.66_1.00_0.01%2Cenc_avif%2Cquality_auto/d3b624_54ab1e86dc4e4c4db1890ecba2241006~mv2.png" alt="NannyProvider.PH logo">
        <span class="title">Nanny Provider PH</span>
      </a>
      <nav class="nav">
        <a href="index.html" aria-current="page">Form</a>
        <a href="welcome.html">Home</a>
        <a href="about.html">About</a>
        <a href="mission.html">Mission & Vision</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>
  <main class="wrap">

    <h1 style="margin:18px 0 6px">Application Form</h1>
    <p style="color:var(--muted);margin:0 0 18px">* All fields with * are required.</p>

    <div class="cards">
      <section class="card">
        <h2>If you are looking for a maid, please fill up the details below.</h2>
        <form id="maid-form" autocomplete="on" novalidate>
          <label><strong>Name *</strong></label>
          <input type="text" name="name" required>
          <label><strong>Phone *</strong></label>
          <input type="tel" name="phone" required inputmode="tel" pattern="^[0-9+()\-\s]{7,}$" placeholder="09xxxxxxxxx / +63 9xx xxx xxxx">
          <label><strong>Email *</strong></label>
          <input type="email" name="email" required placeholder="you@example.com">
          <label><strong>Other comments</strong></label>
          <textarea name="comments" rows="4"></textarea>
          <div class="actions">
            <button type="submit" class="btn">Submit (Looking for a maid)</button>
          </div>
        </form>
      </section>

      <section class="card">
        <h2>Kung ikaw ay naghahanap ng mapapasukan, maaari lamang iwan ang mga detalye sa ibaba.</h2>
        <form id="job-form" autocomplete="on" novalidate>
          <label><strong>Pangalan *</strong></label>
          <input type="text" name="name" required>
          <label><strong>Number *</strong></label>
          <input type="tel" name="phone" required inputmode="tel" pattern="^[0-9+()\-\s]{7,}$" placeholder="09xxxxxxxxx / +63 9xx xxx xxxx">
          <label><strong>Email</strong> (optional)</label>
          <input type="email" name="email" placeholder="you@example.com">
          <label><strong>Iba pang commento</strong></label>
          <textarea name="comments" rows="4"></textarea>
          <div class="actions">
            <button type="submit" class="btn">Submit (Jobseeker)</button>
          </div>
        </form>
      </section>
    </div>

    <div style="text-align:center; margin:24px 0 40px;">
      <a class="btn secondary" href="welcome.html" id="skip-btn">Skip &amp; Go to Home</a>
    </div>

    <script>
      const NP_ENDPOINT = "https://script.google.com/macros/s/AKfycbwXbPKhXxRa5K2MwlHw-3qnklwTIzTT82_S973h3cm3CveG5hYKBY1J498_Uq2j90SX/exec";
      async function postURLEncoded(payload) {
        try {
          const res = await fetch(NP_ENDPOINT, {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
            body: new URLSearchParams(payload).toString(),
            credentials: 'omit'
          });
          return res.ok;
        } catch(e) {
          try {
            await fetch(NP_ENDPOINT, {
              method: 'POST',
              mode: 'no-cors',
              headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
              body: new URLSearchParams(payload).toString(),
              credentials: 'omit',
              keepalive: true
            });
            return true;
          } catch(e2) {
            return false;
          }
        }
      }
      function bindForm(formId, typeLabel) {
        const form = document.getElementById(formId);
        if (!form) return;
        form.addEventListener('submit', async function(e) {
          e.preventDefault();
          if (!form.checkValidity()) {
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({event:'custom_form_invalid', type: typeLabel});
            alert('Please complete the required fields.');
            return;
          }
          const fd = new FormData(form);
          const payload = {
            type: typeLabel,
            name: fd.get('name') || '',
            phone: fd.get('phone') || '',
            email: fd.get('email') || '',
            comments: fd.get('comments') || ''
          };
          window.dataLayer = window.dataLayer || [];
          window.dataLayer.push({event:'custom_form_submit_attempt', ...payload});
          const ok = await postURLEncoded(payload);
          if (ok) {
            window.dataLayer.push({event:'custom_form_submit_success', ...payload});
            window.location.href = 'thank-you.html?status=ok&type=' + encodeURIComponent(typeLabel);
          } else {
            window.dataLayer.push({event:'custom_form_submit_error', ...payload});
            window.location.href = 'thank-you.html?status=maybe&type=' + encodeURIComponent(typeLabel);
          }
        });
      }
      document.addEventListener('DOMContentLoaded', function() {
        bindForm('maid-form','Looking for a maid');
        bindForm('job-form','Jobseeker');
      });
    </script>

  </main>
  <footer class="wrap" style="padding:24px 0;color:var(--muted)">
    <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between">
      <small>© NannyProvider.PH — DOLE PEA LICENSE NO. M-23-00-016</small>
      <small>206 Casa Susana Bldg. 1121 Pedro Gil St., Brgy. 675, Paco Manila • Daily 9:00 AM — 6:00 PM</small>
    </div>
  </footer>
  <script defer src="script.js?v=6"></script>
</body>
</html>